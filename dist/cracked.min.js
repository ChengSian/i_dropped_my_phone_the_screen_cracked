/*! i-dropped-my-phone-the-screen-cracked 06-08-2014 */
!function(){"use strict";function a(){if(arguments&&arguments.length)if(k())b(arguments[0]);else{var a=arguments[0];V=a,U=F(a)}else d();return T=null,Z}function b(){if(arguments&&arguments.length){for(var a,b=arguments[0].split(","),c=m(),d=l().getUUID(),e=0;e<b.length;e++)b[e]=-1!==b[e].indexOf(c)?b[e]:c+b[e];a=b.join(","),V=a,U=F(a),U.forEach(function(a,b,c){a&&E(a).getMacroContainerUUID()!==d&&c.splice(b,1)})}}function c(){var a=G();U.forEach(function(b){b=E(b),b&&a&&(a.connect(b),a.pushNextNode(b),b.setPrevNode(a),Q(a,b))})}function d(){T=null,U=[],V=""}function e(){U=[],V=""}function f(a,b,c,d){for(var e=h(b,d),f=e.path.split("."),i=e.fn||function(a){return a},j=0;j<f.length;j++)j+1<f.length&&__.isNotUndef(a[f[j]])?"AudioParam"===a[f[j]].constructor.name?g(a[f[j]],c):a=a[f[j]]:a&&__.isNotUndef(a[f[j]])&&(a[f[j]]=i(c))}function g(a,b){if(a&&__.isFun(a.setValueAtTime)){var c=_?Y.currentTime:hb;a.cancelScheduledValues(c),a.setValueAtTime(b,c)}}function h(a,b){var c=b||{},d=c[a]||a;return d.path?d:{path:d}}function i(a,b){return n(a,{settings:{}},b)}function j(a){k()&&(a.setMacroContainerUUID(l().getUUID()),l().addNativeNode(a.getNativeNode()))}function k(){return!!W.length}function l(){return k()?W[W.length-1]:null}function m(){var a=[],b=" ";if(k())for(var c=0;c<W.length;c++)a.push(W[c].getType()),a.push(b);return a.join("")}function n(a,b,c){var d=new p(a,b,c||{});if(B(d),d.isMacro())return d;for(var f=U.length?U:[G()],g=0;g<f.length;g++){var h=E(f[g]);if(h)try{h.connect(d),h.pushNextNode(d),d.setPrevNode(h),Q(h,d)}catch(i){throw console.error("ERROR : couldn't connect nodes "+h.getType()+" and "+d.getType()),i}}return e(),H(d),d}function o(a){var b;if(Y&&a.method&&Y[a.method]){b=Y[a.method].apply(Y,a.methodParams||[]);for(var c in a.settings)a.settings.hasOwnProperty(c)&&f(b,c,a.settings[c],a.mapping)}else b=Y&&a.method&&!Y[a.method]?Y.destination:[];return P(b),b}function p(a,b,c){function d(a,b){a.uuid=b,e(p,a)}function e(a,b){a.forEach(function(a,c,d){__.isArr(a)?e(a,b):a.uuid===b.uuid&&(d[c]=b)})}function g(a,b){return a&&a.isModulator()&&b&&!a.areSiblings(b)?{from:i(a,"from"),to:j(b,a.isModulatorType())}:{from:i(a,"from"),to:i(b,"to")}}function i(a,b){if(a){var c=a.getNativeNode();return __.isArr(c)&&(c="from"===b?c[c.length-1]:c[0]),c}return null}function j(a,b){if(a){var c=a.getNativeNode(),d=b;if(__.isArr(c)){for(var e=0;e<c.length;e++)if(d=h(b,E(c[e].uuid).getParamMapping()).path.replace(".value",""),__.isNotUndef(c[e][d])){c=c[e][d];break}}else d=h(b,a.getParamMapping()).path.replace(".value",""),c=c[d]?c[d]:null;return c}return null}var k,l,m,n,p,q,r="",s=!1,t=[],u={},v=this;k=L(),N(c,b.settings),N(c.mapping,b.mapping),m=b,u=b.mapping||b.settings.mapping,n=a,p=o(m),p.uuid=k,this.start=function(a){var b=a||p;if(__.isArr(b))b.forEach(function(a){v.start(a)});else if(b&&__.isFun(b.start)){var c=E(b.uuid);c.getIsPlaying()||(b.start(0),c.setIsPlaying(!0),this.setIsPlaying(!0))}},this.stop=function(a){var b=a||p;if(__.isArr(b))b.forEach(function(a){v.stop(a)});else if(b&&__.isFun(b.stop)){var c=E(b.uuid);c.getIsPlaying()&&(b.stop(0),this.resetNode(b),c.setIsPlaying(!1),this.setIsPlaying(!1))}},this.ramp=function(a,b,c,d,e){var f=d||p;if(__.isArr(f))f.forEach(function(d){v.ramp(a,b,c,d,e)});else{var g=$?hb:Y.currentTime;if(f&&f[c]&&__.isFun(f[c].linearRampToValueAtTime)){f[c].cancelScheduledValues(g);var h=__.ifUndef(e,f[c].value),i=0;if(f[c].setValueAtTime(h,g),__.isArr(a)&&__.isArr(b)&&a.length===b.length)for(var j=0;j<a.length;j++)i=__.isUndef(b[j-1])?0:b[j-1]+i,P(" target "+a[j]+" time "+(Y.currentTime+i+b[j])),f[c].linearRampToValueAtTime(a[j],g+i+b[j]);else f[c].linearRampToValueAtTime(a,g+b)}}},this.attr=function(a){for(var b in a)if(a.hasOwnProperty(b)&&__.isNotUndef(a[b])){var c=this.getNativeNode();if(__.isArr(c))J(c).forEach(function(c){var d=a.mapping||E(c.uuid).getParamMapping();f(c,b,a[b],d||{}),P(c)});else{var d=a.mapping||E(c.uuid).getParamMapping();f(c,b,a[b],d||{}),P(c)}}},this.search=function(a){var b=[];if(a)for(var c=this.getMacroNameSpace(),d=c+a,e=F(d),f=0;f<e.length;f++)E(e[f]).getMacroContainerUUID()===this.getUUID()&&b.push(e[f]);return b},this.getMacroNameSpace=function(){return r},this.setMacroNameSpace=function(a){a&&(r=a)},this.isMacro=function(){return __.isArr(p)},this.isMacroComponent=function(){return __.isNotUndef(l)},this.setMacroContainerUUID=function(a){__.isStr(a)&&(l=a)},this.getMacroContainerUUID=function(){return l},this.getIsPlaying=function(){return s},this.setIsPlaying=function(a){s=a},this.getPrevNode=function(){return q},this.setPrevNode=function(a){q=a},this.pushNextNode=function(a){if(a){var b=g(this,a),c=E(b.from.uuid);c.getUUID()!==this.getUUID()?c.pushNextNode(a):t.push(a)}},this.getUUID=function(){return k},this.getParams=function(){return m},this.getParamMapping=function(){return u},this.getType=function(){return n},this.getID=function(){return m.settings.id||""},this.getClass=function(){return m.settings["class"]||""},this.areSiblings=function(a){var b=__.isObj(a)?a.getMacroContainerUUID():__.isStr(a)?E(a).getMacroContainerUUID():"";return b===this.getMacroContainerUUID()},this.isModulator=function(){return this.getMacroContainerUUID()&&E(this.getMacroContainerUUID()).getParams().settings.modulates?!0:!!this.getParams().settings.modulates},this.isModulatorType=function(){return this.isModulator()&&this.getMacroContainerUUID()&&E(this.getMacroContainerUUID()).getParams().settings.modulates?E(this.getMacroContainerUUID()).getParams().settings.modulates:this.isModulator()?this.getParams().settings.modulates:""},this.addNativeNode=function(a){p.push(a)},this.getNativeNode=function(){return p},this.resetNode=function(a){if(this.isMacro())E(a.uuid).resetNode(),d(E(a.uuid).getNativeNode(),a.uuid);else{var b=p.buffer;p=o(m),p.uuid=this.getUUID();for(var c=0;c<t.length;c++)this.connect(t[c]);this.connectPrevious(),this.setIsPlaying(!1),b&&(p.buffer=b)}},this.connect=function(a){if(a&&this.getUUID()!==a.getUUID()){var b=g(this,a);b.from&&__.isFun(b.from.connect)&&b.to?b.from.connect(b.to):P("ERROR - connect did not happen")}},this.connectPrevious=function(){var a=this.getPrevNode();if(a&&this.getUUID()!==a.getUUID()){var b=g(a,this);b.from&&__.isFun(b.from.connect)&&b.to?b.from.connect(b.to):P("ERROR - connect did not happen")}}}function q(){$&&(_=!_)}function r(){$||(hb=Y.currentTime+bb/1e3,cb=setInterval(v,bb/1.75),$=!0)}function s(){$&&(clearInterval(cb),$=!1,hb=0)}function t(){ab=16,bb=100,_=!1,cb=0,db=function(){},eb=[],gb=[],fb=0,$=!1,hb=0}function u(a,b,c){a&&(ab=a.steps||16,bb=a.interval||100),__.isFun(b)&&(db=b),eb=__.isArr(c)&&c.length===ab?c:[]}function v(){var a=Y.currentTime,b=hb-bb/1e3;hb>a&&a>b&&(w(),hb+=bb/1e3)}function w(){fb=ab-1>fb?fb+1:0,__.isFun(db)&&db(fb,Z.ifUndef(eb[fb],null),eb);for(var a=0;a<gb.length;a++){var b=gb[a],c=U;U=b.selection,b.callback(fb,Z.ifUndef(b.data[fb],null),b.data),U=c}}function x(a,b){a&&a.path&&b?z(a.path,b.getNativeNode()):a&&a.fn&&b&&y(a.fn,b.getNativeNode())}function y(a,b){a&&b&&(b.buffer=a(Y))}function z(a,b){a&&b&&A(a,function(a){Y.decodeAudioData(a,function(a){b.buffer=a,P("sound loaded")},function(){P("Couldn't load audio")})})}function A(a,b){if(a&&b){var c=new XMLHttpRequest;c.open("GET",a,!0),c.responseType="arraybuffer",c.onload=function(){__.isFun(b)&&b(c.response)},c.send()}}function B(a){j(a),C(a),D(a)}function C(a){R[a.getUUID()]=a}function D(a){var b=a.getParams().settings,c=m();if(__.isObj(b))for(var d in b)if("id"===d)M(S,c+"#"+b[d],a.getUUID());else if("class"===d){var e=b[d].split(",");e.forEach(function(){M(S,c+"."+b[d],a.getUUID())})}M(S,"*",a.getUUID()),M(S,c+a.getType(),a.getUUID())}function E(a){return a&&R[a]?R[a]:a&&__.isObj(a)&&"AudioNode"===a.constructor.name?a:__.isObj(a)&&__.isNotUndef(a.uuid)?E(a.uuid):null}function F(a){var b=a.split(","),c=[];return b.forEach(function(a){if(a&&S[a]){var b=S[a];b="id"===I(a)&&__.isArr(b)&&b.length>1?[b[0]]:b,c=K(c.concat(b))}}),c}function G(){return T}function H(a){a&&(T=a)}function I(a){return a.match(/^\./)?"class":a.match(/^\#/)?"id":"type"}function J(a,b){b=b||[];for(var c=0;c<a.length;c++)a[c].constructor===Array?J(a[c],b):b.push(a[c]);return b}function K(a){for(var b=a.concat(),c=0;c<b.length;++c)for(var d=c+1;d<b.length;++d)b[c]===b[d]&&b.splice(d--,1);return b}function L(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"===a?b:3&b|8;return c.toString(16)})}function M(a,b,c){a&&b&&(a[b]&&a[b].push?a[b].push(c):a[b]=[c])}function N(a,b){a=a||{},b=b||{};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function O(a,b){if(V){var c=b||[],d=a||U;d.forEach(function(a,b,d){var e=E(a).getNativeNode();__.isArr(e)&&O(e,c),d===U&&c.push(e)})}}function P(a){X&&console.log(a)}function Q(a,b){var c=[a.getType(),a.getID(),b.getType(),b.getID()];P("connected "+c[0]+" - "+c[1]+" to "+c[2]+" - "+c[3])}var R={},S={},T=null,U=[],V="",W=[],X=!1,Y=window.AudioContext?new AudioContext:new webkitAudioContext,Z=a;Z.connect=function(){var b=G();return!b&&U.length&&(b=E(U[0])),a(arguments[0]),H(b),c(),Z},Z.start=function(){if(!k())for(var a=0;a<U.length;a++){var b=E(U[a]);b&&!b.getIsPlaying()&&b.start(0)}return Z},Z.stop=function(){for(var a=0;a<U.length;a++){var b=E(U[a]);b&&b.getIsPlaying()&&b.stop(0)}return Z},Z.ramp=function(a,b,c,d){for(var e=0;e<U.length;e++){var f=E(U[e]);f&&f.ramp(a,b,c,null,d)}return Z},Z.attr=function(a){for(var b=0;b<U.length;b++){var c=E(U[b]);c&&a&&c.attr(a)}return Z},Z.begin=function(a,b){return a&&W.push(i(a,b)),Z},Z.end=function(a){return k()&&l().getType()===a&&(l().setMacroNameSpace(m()),W.pop()),Z},Z.exec=function(a,b,c){var d=U;return U=c,Z[a].apply(Z,b),U=d,Z},Z.filter=function(){var a=[];if(arguments&&arguments.length){var b=arguments[0],c=I(b),d=b.match(/^\.|\#/)?b.substring(1):b;U.forEach(function(b){var e=E(b);("type"===c&&e.getType()===d||"class"===c&&e.getClass()===d||"id"===c&&e.getID()===d)&&a.push(b)})}return a},Z.each=function(a){if(__.isFun(a))for(var b=0;b<U.length;b++)a(E(U[b]),b,U);return Z};var $=!1,_=!1,ab=16,bb=100,cb=0,db=function(){},eb=[],fb=0,gb=[],hb=0;Z.loop=function(){return arguments&&arguments.length&&("stop"===arguments[0]?s():"start"===arguments[0]?r():"reset"===arguments[0]?t():"toggle_grid"===arguments[0]?q():arguments[0]&&__.isObj(arguments[0])&&u(arguments[0],arguments[1],arguments[2])),Z},Z.bind=function(a,b,c){return"step"===a&&__.isFun(b)&&gb.push({eventType:a,callback:b,data:c||[],selection:U.slice(0),selector:V}),Z},Z.unbind=function(a){if("step"===a){var b=[];gb.forEach(function(a){V!==a.selector&&b.push(a)}),gb=b}},Z.script=function(a){function b(a){for(var b=a.inputBuffer.getChannelData(0),d=a.outputBuffer.getChannelData(0),e=0;c>e;e++)d[e]=b[e]}a=a||{};var c=a.buffersize||4096,d=a.channels||1,e=a.fn||b,f={method:"createScriptProcessor",methodParams:[c,d,d],settings:{onaudioprocess:e}};return n("script",f,a),Z},Z.waveshaper=function(a){function b(a){for(var b,c=__.isNum(a)?a:50,d=44100,e=new Float32Array(d),f=Math.PI/180,g=0;d>g;++g)b=2*g/d-1,e[g]=(3+c)*b*20*f/(Math.PI+c*Math.abs(b));return e}a=a||{};var c=__.isObj(a)?Z.ifUndef(a.drive,50):a,d={method:"createWaveShaper",settings:{curve:a.curve||b(c),mapping:{distortion:{path:"curve",fn:function(){return b}()}}}};return n("waveshaper",d,a),Z},Z.compressor=function(a){var b={threshold:"threshold.value",knee:"knee.value",ratio:"ratio.value",attack:"attack.value",release:"release.value"},c={method:"createDynamicsCompressor",settings:{},mapping:b};return n("compressor",c,a),Z},Z.gain=function(a){var b=__.isNum(a)?a:1,c=__.isObj(a)?a:{gain:b},d={method:"createGain",settings:{},mapping:{gain:"gain.value"}};return n("gain",d,c),Z},Z.native_delay=function(a){var b={method:"createDelay",methodParams:[179],settings:{},mapping:{delay:"delayTime.value"}};return n("delay",b,a),Z},Z.osc=function(a){var b={method:"createOscillator",settings:{},mapping:{frequency:"frequency.value",detune:"detune.value"}};return n("osc",b,a),Z},Z.biquadFilter=function(a){var b={method:"createBiquadFilter",settings:{},mapping:{q:"Q.value",frequency:"frequency.value",gain:"gain.value"}};return n("biquadFilter",b,a),Z},Z.convolver=function(a){a=a||{};var b={method:"createConvolver",settings:{}},c=n("convolver",b,a);return x(a,c),Z},Z.destination=function(a){return n("destination",{method:"createDestination",settings:{}},a),Z},Z.buffer=function(a){var b={method:"createBufferSource",settings:{},mapping:{speed:"playbackRate.value",start:"loopStart",end:"loopEnd"}},c=n("buffer",b,a);return x(a,c),Z},Z.remove=function(){for(var a=V.split(","),b=0;b<a.length;b++)if(S[a[b]])for(var c=Object.keys(S),d=0;d<c.length;d++){var e=new RegExp(a[b]+"\\s*");if(c[d].match(e)){for(var f=S[c[d]],g=0;g<f.length;g++){delete R[[c[d]][g]];var h=S["*"].indexOf(S[c[d]][g]);h>-1&&S["*"].splice(h,1)}delete S[c[d]]}}},Z.log=function(){var a=[];O(null,a),console.log(a)},Z.size=function(){return U.length?U.length:0},function(){-1!==window.location.href.indexOf("debug=true")&&(X=!0)}(),Z._dumpState=function(){console.log(S)},Z._getNode=function(a){return E(a)},Z.version="0.1.0",window.cracked=Z,window.__=window.__||Z}(),cracked.ifUndef=function(a,b){return"undefined"==typeof a?b:a},cracked.isNotUndef=function(a){return"undefined"!=typeof a},cracked.isUndef=function(a){return"undefined"==typeof a},cracked.isObj=function(a){return a&&"object"==typeof a},cracked.isNum=function(a){return null===a||""===a?!1:!isNaN(a)},cracked.isStr=function(a){return a&&"string"==typeof a},cracked.isArr=function(a){return a&&a instanceof Array},cracked.isFun=function(a){return a&&a instanceof Function},cracked.reverb=function(a){function b(a){var b,c,g=a.sampleRate,h=g*d,i=f,j=a.createBuffer(2,h,g),k=j.getChannelData(0),l=j.getChannelData(1);for(c=0;h>c;c++)b=e?h-c:c,k[c]=(2*Math.random()-1)*Math.pow(1-b/h,i),l[c]=(2*Math.random()-1)*Math.pow(1-b/h,i);return j}var c=__.ifUndef(a,{});c.path||(c.fn=c.fn||b);var d=__.ifUndef(c.seconds,3),e=__.ifUndef(c.reverse,!1),f=__.ifUndef(c.decay,2);return __.begin("reverb",c).convolver(c).end("reverb"),cracked},cracked.delay=function(a){a=__.ifUndef(a,{});var b=__.isObj(a)?__.ifUndef(a.delay,1):a;return __.begin("delay",a),__.gain({id:"delay-input"}).native_delay({id:"native-delay",delay:b,mapping:{delay:"delayTime.value"}}).gain({id:"delay-damping",gain:__.ifUndef(a.damping,.84),mapping:{damping:"gain.value"}}).lowpass({id:"delay-cutoff",frequency:__.ifUndef(a.cutoff,1500),mapping:{cutoff:"frequency.value"}}).gain({id:"delay-feedback",gain:__.ifUndef(a.feedback,.5),mapping:{feedback:"gain.value"}}).gain({id:"delay-output"}),__("#delay-feedback").connect("#delay-input"),__("#native-delay").gain(.5).connect("#delay-output"),__.end("delay"),cracked},cracked.comb=function(a){var b=__.ifUndef(a,{});return __.begin("comb",b),__.gain({id:"comb-input"}).native_delay({id:"comb-delay",delay:__.ifUndef(b.delay,.027),mapping:{delay:"delayTime.value"}}).gain({id:"comb-damping",gain:__.ifUndef(b.damping,.84),mapping:{damping:"gain.value"}}).lowpass({id:"comb-cutoff",frequency:__.ifUndef(b.cutoff,3e3),mapping:{cutoff:"frequency.value"}}).gain({id:"comb-feedback",gain:__.ifUndef(b.feedback,.84),mapping:{feedback:"gain.value"}}).connect("#comb-input"),__("#comb-damping").gain({id:"output"}),__.end("comb"),cracked},cracked.bitcrusher=function(a){return a=a||{},__.begin("bitcrusher",a),__.script({fn:function(a){function b(a){for(var b=a.inputBuffer.getChannelData(0),c=a.outputBuffer.getChannelData(0),h=0;4096>h;h++)f+=d,f>=1&&(f-=1,g=e*Math.floor(b[h]/e+.5)),c[h]=g}var c=a.bits||6,d=__.ifUndef(a.frequency,.1),e=Math.pow(.5,c),f=0,g=0;return b}(a)}),__.end("bitcrusher"),cracked},cracked.ring=function(a){function b(a){var b,c,d,e,f,g,h,i,j,k;for(i=.2,j=.4,k=__.ifUndef(a,1),c=1024,f=new Float32Array(c),b=g=0,h=f.length;h>=0?h>g:g>h;b=h>=0?++g:--g)d=(b-c/2)/(c/2),d=Math.abs(d),e=i>=d?0:d>i&&j>=d?k*(Math.pow(d-i,2)/(2*j-2*i)):k*d-k*j+k*(Math.pow(j-i,2)/(2*j-2*i)),f[b]=e;return f}var c=a||{},d=b(__.ifUndef(c.distortion,1));return __.begin("ring",a),__.gain({id:"player"}).gain({id:"vcInverter1",gain:-1}).waveshaper({id:"vcDiode3",curve:d,mapping:{distortion:{path:"curve",fn:function(){return b}()}}}).compressor({threshold:-12}),__("#player").waveshaper({id:"vInDiode4",curve:d,mapping:{distortion:{path:"curve",fn:function(){return b}()}}}).connect("compressor"),__().sine({id:"vIn",frequency:c.frequency||30,mapping:{frequency:"frequency.value"}}).gain({id:"vInGain",gain:.5}).gain({id:"vInInverter1",gain:-1}).gain({id:"vInInverter2",gain:-1}).waveshaper({id:"vInDiode1",curve:d,mapping:{distortion:{path:"curve",fn:function(){return b}()}}}).gain({id:"vInInverter3",gain:-1}).connect("compressor"),__("#vInGain").connect("#vInDiode4"),__("#vInGain").connect("#vcInverter1"),__("#vInInverter1").waveshaper({id:"vInDiode2",curve:d,mapping:{distortion:{path:"curve",fn:function(){return b}()}}}).connect("#vInInverter3"),__("compressor").gain({id:"outGain",gain:4}),__.end("ring"),cracked},cracked.overdrive=function(a){function b(a){for(var b=100*a,c=22050,d=new Float32Array(c),e=Math.PI/180,f=0;c>f;f++){var g=2*f/c-1;d[f]=(3+b)*g*20*e/(Math.PI+b*Math.abs(g))}return d}a=a||{};var c=__.isObj(a)?__.ifUndef(a.drive,.5):a;return __.begin("overdrive",a),__.gain({id:"input"}).bandpass({frequency:__.ifUndef(a.color,800),mapping:{color:"frequency.value"}}).waveshaper({curve:b(c),mapping:{drive:{path:"curve",fn:function(){return b}()}}}).lowpass({frequency:__.ifUndef(a.postCut,3e3),mapping:{postCut:"frequency.value"}}).gain({id:"output"}),__.end("overdrive"),cracked},cracked.adsr=function(a){function b(a,b){var c,d=a||b,e=[0,0,0,0,0],f=d||.5;if(__.isArr(f)){if(5===f.length)e=f;else if(4===f.length){var g=f[0]+f[1]+f[3];e=[f[0],f[1],f[2],g/3,f[3]]}}else __.isNum(f)?(c=f/4,e=[c,c,.5,c,c]):__.isStr(f)&&(f="slow"===f?1:"fast"===f?.25:.5,c=f/4,e=[c,c,.5,c,c]);return e}var c={init:function(a){a=a||{},a=__.isNum(a)||__.isArr(a)||__.isStr(a)?{envelope:a}:a,__.begin("adsr",a).gain({gain:0}).end("adsr")},trigger:function(a){cracked.each(function(c){if("adsr"===c.getType()){var d=b(a,c.getParams().settings.envelope);c.ramp([1,d[2],d[2],0],[d[0],d[1],d[3],d[4]],"gain",null,0)}})},release:function(){cracked.each(function(a){"adsr"===a.getType()&&a.ramp(0,.1,"gain")})}};return c[a]?c[a].apply(this,Array.prototype.slice.call(arguments,1)):c.init(a),cracked},cracked.foo=function(a){return __.begin("foo",a).lowpass().gain().compressor().end("foo"),cracked},cracked.bar=function(a){return __().begin("bar",a).buffer({path:"../data/various/gun-cock.wav",loop:!0}).gain().end("bar"),cracked},cracked.dalek=function(a){return __().begin("dalek",a).buffer({path:"../data/various/ringmod_good-dalek.wav",loop:!0}).gain().end("dalek"),cracked},cracked.junk=function(a){return __.begin("junk",a).foo().end("junk"),cracked},cracked.komb=function(a){return __.begin("komb",a).gain({id:"input"}).delay({time:.025}).gain({id:"output"}),__("#output").gain({gain:.85,id:"feedback"}).connect("#input").end("komb"),cracked},cracked.lowpass=function(a){var b=__.isNum(a)?a:440,c=__.isObj(a)?a:{},d={};return d.type=c.type||"lowpass",d.frequency=c.frequency||b,d.q=__.ifUndef(c.q,0),d.mapping=c.mapping||{},__.begin("lowpass",c).biquadFilter(d).end("lowpass"),cracked},cracked.highpass=function(a){var b=__.isNum(a)?a:440,c=__.isObj(a)?a:{},d={};return d.type=c.type||"highpass",d.frequency=c.frequency||b,d.q=__.ifUndef(c.q,0),d.mapping=c.mapping||{},__.begin("highpass",c).biquadFilter(d).end("highpass"),cracked},cracked.bandpass=function(a){var b=__.isNum(a)?a:440,c=__.isObj(a)?a:{},d={};return d.type=c.type||"bandpass",d.frequency=c.frequency||b,d.q=__.ifUndef(c.q,0),d.mapping=c.mapping||{},__.begin("bandpass",c).biquadFilter(d).end("bandpass"),cracked},cracked.lowshelf=function(a){var b=__.isNum(a)?a:440,c=__.isObj(a)?a:{},d={};return d.type=c.type||"lowshelf",d.frequency=c.frequency||b,d.q=__.ifUndef(c.q,0),d.gain=__.ifUndef(c.gain,0),d.mapping=c.mapping||{},__.begin("lowshelf",c).biquadFilter(d).end("lowshelf"),cracked},cracked.highshelf=function(a){var b=__.isNum(a)?a:440,c=__.isObj(a)?a:{},d={};return d.type=c.type||"highshelf",d.frequency=c.frequency||b,d.gain=__.ifUndef(c.gain,0),d.q=__.ifUndef(c.q,0),d.mapping=c.mapping||{},__.begin("highshelf",c).biquadFilter(d).end("highshelf"),cracked},cracked.peaking=function(a){var b=__.isNum(a)?a:440,c=__.isObj(a)?a:{},d={};return d.type=c.type||"peaking",d.frequency=c.frequency||b,d.q=__.ifUndef(c.q,0),d.gain=__.ifUndef(c.gain,0),d.mapping=c.mapping||{},__.begin("peaking",c).biquadFilter(d).end("peaking"),cracked},cracked.notch=function(a){var b=__.isNum(a)?a:440,c=__.isObj(a)?a:{},d={};return d.type=c.type||"notch",d.frequency=c.frequency||b,d.q=__.ifUndef(c.q,10),d.mapping=c.mapping||{},__.begin("notch",c).biquadFilter(d).end("notch"),cracked},cracked.allpass=function(a){var b=__.isNum(a)?a:440,c=__.isObj(a)?a:{},d={};return d.type=c.type||"allpass",d.frequency=c.frequency||b,d.q=__.ifUndef(c.q,10),d.mapping=c.mapping||{},__.begin("allpass",c).biquadFilter(d).end("allpass"),cracked},cracked.dac=function(a){var b=__.isNum(a)?a:1,c=__.isObj(a)?a:{},d={};return d.mapping=c.mapping||{},__.begin("dac",c).gain(b).destination().end("dac"),cracked},cracked.sampler=function(a){return a&&a.path&&__.begin("sampler",a).buffer(a).end("sampler"),cracked},cracked.lfo=function(a){var b=a||{};return b.modulates=b.modulates||"frequency","white"===b.type||"pink"===b.type||"brown"===b.type?__().begin("lfo",b).noise({type:b.type||"white",channels:b.channels||1,length:b.length||1}).gain({gain:__.ifUndef(b.gain,1e3)}).end("lfo"):__().begin("lfo",b).osc({type:b.type||"sawtooth",frequency:b.frequency||6}).gain({gain:__.ifUndef(b.gain,1e3)}).end("lfo"),cracked},cracked.noise=function(a){var b=a||{};return"brown"===b.type?__.begin("noise",b).brown(b).end("noise"):"pink"===b.type?__.begin("noise",b).pink(b).end("noise"):__.begin("noise",b).white(b).end("noise"),cracked},cracked.pink=function(a){function b(a){function b(a,b){var c,d,e,f,g=a,h=[0,0,0,0,0,0,0],i=[],j=g.numberOfChannels,k=g.length;for(e=0;j>e;e++){for(i[e]=new Float32Array(k),c=b[e],f=0;k>f;f++)d=c[f],h[0]=.99886*h[0]+.0555179*d,h[1]=.99332*h[1]+.0750759*d,h[2]=.969*h[2]+.153852*d,h[3]=.8665*h[3]+.3104856*d,h[4]=.55*h[4]+.5329522*d,h[5]=-.7616*h[5]-.016898*d,i[e][f]=h[0]+h[1]+h[2]+h[3]+h[4]+h[5]+h[6]+.5362*d,i[e][f]*=.11,h[6]=.115926*d;h=[0,0,0,0,0,0,0]}for(e=0;j>e;e++)for(f=0;k>f;f++)b[e][f]=i[e][f]}for(var c=a.createBuffer(d,e*a.sampleRate,a.sampleRate),f=c.length,g=c.numberOfChannels,h=[],i=0;g>i;i++)h.push(c.getChannelData(i));for(var j=0;f>j;j++)for(var k=0;g>k;k++)h[k][j]=2*Math.random()-1;return b(c,h),c}var c=a||{},d=c.channels||1,e=c.length||1;return __().begin("pink",c).buffer({fn:b,loop:!0}).end("pink"),cracked},cracked.white=function(a){function b(a){for(var b=a.createBuffer(d,e*a.sampleRate,a.sampleRate),c=b.length,f=b.numberOfChannels,g=[],h=0;f>h;h++)g.push(b.getChannelData(h));for(var i=0;c>i;i++)for(var j=0;f>j;j++)g[j][i]=.44*(2*Math.random()-1);return b}var c=a||{},d=c.channels||1,e=c.length||1;return __().begin("white",c).buffer({fn:b,loop:!0}).end("white"),cracked},cracked.brown=function(a){function b(a){for(var b=a.createBuffer(d,e*a.sampleRate,a.sampleRate),c=0,f=b.length,g=b.numberOfChannels,h=[],i=0;g>i;i++)h.push(b.getChannelData(i));for(var j=0;f>j;j++)for(var k=0;g>k;k++){var l=2*Math.random()-1;h[k][j]=(c+.02*l)/1.02,c=h[k][j],h[k][j]*=3.5}return b}var c=a||{},d=c.channels||1,e=c.length||1;return __().begin("brown",c).buffer({fn:b,loop:!0}).end("brown"),cracked},cracked.sine=function(a){var b=__.isNum(a)?a:440,c=__.isObj(a)?a:{},d={};return d.type=c.type||"sine",d.frequency=c.frequency||b,d.detune=c.detune||0,d.mapping=c.mapping||{},__.begin("sine",c).osc(d).end("sine"),cracked},cracked.square=function(a){var b=__.isNum(a)?a:440,c=__.isObj(a)?a:{},d={};return d.type=c.type||"square",d.frequency=c.frequency||b,d.detune=c.detune||0,d.mapping=c.mapping||{},__.begin("square",c).osc(d).end("square"),cracked},cracked.saw=function(a){var b=__.isNum(a)?a:440,c=__.isObj(a)?a:{},d={};return d.type=c.type||"sawtooth",d.frequency=c.frequency||b,d.detune=c.detune||0,d.mapping=c.mapping||{},__.begin("saw",c).osc(d).end("saw"),cracked},cracked.triangle=function(a){var b=__.isNum(a)?a:440,c=__.isObj(a)?a:{},d={};return d.type=c.type||"triangle",d.frequency=c.frequency||b,d.detune=c.detune||0,d.mapping=c.mapping||{},__.begin("triangle",c).osc(d).end("triangle"),cracked},cracked.monosynth=function(a){var b={init:function(){__().begin("monosynth",a).lfo({gain:0}).sine().lowpass({q:0}).adsr().gain().end("monosynth")},noteOn:function(a){var b=a||{},c=__.pitch2freq(__.isNum(a)?a:b.pitch),d=b.envelope||1;cracked.each(function(a){"monosynth"===a.getType()&&(cracked.exec("frequency",[c],a.search("sine")),cracked.exec("adsr",["trigger",d],a.search("adsr")))})},noteOff:function(){cracked.each(function(a){"monosynth"===a.getType()&&cracked.exec("adsr",["release",[]],a.search("adsr"))})}};return b[a]?b[a].apply(this,Array.prototype.slice.call(arguments,1)):b.init(a),cracked},cracked.cracksynth=function(a){var b={init:function(){__().begin("cracksynth",a).lfo({gain:100}).sine().lowpass({q:20}).adsr().gain().end("cracksynth")},noteOn:function(a){var b=a||{},c=__.pitch2freq(__.isNum(a)?a:b.pitch),d=b.envelope||1;cracked.each(function(a){"cracksynth"===a.getType()&&(cracked.exec("frequency",[c],a.search("sine")),cracked.exec("adsr",["trigger",d],a.search("adsr")),cracked.exec("ramp",[[100,10],[.5*d,.5*d],"frequency",10],a.search("lfo")),cracked.exec("ramp",[[c/2,3*c],[.1*d,.9*d],"frequency",3*c],a.search("lowpass")))})},noteOff:function(){cracked.each(function(a){"cracksynth"===a.getType()&&cracked.exec("adsr",["release",[]],a.search("adsr"))})}};return b[a]?b[a].apply(this,Array.prototype.slice.call(arguments,1)):b.init(a),cracked},cracked.frequency=function(a){return __.isNum(a)&&cracked.attr({frequency:a}),cracked},cracked.detune=function(a){return __.isNum(a)&&cracked.attr({detune:a}),cracked},cracked.volume=function(a){return __.isNum(a)&&cracked.attr({gain:a}),cracked},cracked.time=function(a){return __.isNum(a)&&cracked.attr({delay:a}),cracked},cracked.feedback=function(a){return __.isNum(a)&&cracked.attr({feedback:a}),cracked},cracked.speed=function(a){return __.isNum(a)&&cracked.attr({speed:a}),cracked},cracked.drive=function(a){return __.isNum(a)&&cracked.attr({drive:a}),cracked},cracked.distortion=function(a){return __.isNum(a)&&cracked.attr({distortion:a}),cracked},cracked.play=function(){return cracked("*").start(),cracked},cracked.scale=function(a){return{major:[0,2,4,5,7,9,11],minor:[0,2,3,5,7,8,10]}[a]},cracked.pitch2freq=function(a){return 440*Math.pow(2,(Math.floor(a)-69)/12)},cracked.random=function(a,b){return Math.round(a+Math.random()*(b-a))};