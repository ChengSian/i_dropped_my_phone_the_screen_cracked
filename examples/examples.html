<html>

<script src="../src/cracked.js"></script>
<script src="../plugins/cracked.utilities.js"></script>
<script src="../plugins/cracked.miscellaneous.js"></script>
<script src="../plugins/cracked.oscillators.js"></script>
<script src="../plugins/cracked.filters.js"></script>
<script src="../plugins/cracked.modulators.js"></script>
<script src="../plugins/cracked.delays.js"></script>
<script src="../plugins/cracked.envelopes.js"></script>
<script src="../plugins/cracked.noise.js"></script>
<script src="../plugins/cracked.distortion.js"></script>
<script src="../plugins/cracked.experimental.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

		
<script>

 cracked.microsynth = function(params) {
  __().begin("microsynth",params).sine().gain(0).end("microsynth");
     return cracked;
 };

//create two instances with different ids
__().microsynth({id:"micro1"}).lowpass().dac();
__().microsynth({id:"micro2"}).lowpass().connect("dac");

 //change the frequency in the first
 __("#micro1").frequency(1200);
 //change the frequency in the second
 __("#micro2").frequency(100);

 //set the gain in both and start them
 __("microsynth").volume(1).start();

//create & connect white noise and notch filter to output			
//__().white().notch(440).dac(.25);
//__("white").start();

/*
//create & connect an lfo to a sine and then to output
//set master gain to .25
__().lfo({frequency:4,type:"sine",gain:10,id:"lfo1"}).sine().dac(.25);

//connect lfo #2 to lfo#1, modulate gain
__().lfo({frequency:.1,modulates:"gain",gain:50,type:"sine"}).connect("#lfo1");

//start
__("sine,lfo").start();
*/	

//overdrive / comb test
//__().bar().comb({drive:10,delay:.1}).adsr().dac();
//__("bar").start();
//console.log(__("bar").each(function(el,i,arr){console.log(el.getType());}));


//__().sine().adsr({envelope:"slow",id:"bar"}).dac();

//__("sine").adsr({envelope:"fast",id:"foo"}).ring().connect("dac").play();

//__("#foo").adsr("trigger");


//__("adsr").adsr("trigger") //works ok

//__("*").adsr("trigger",1) //goes nuts

	//__().sine(1).gain({gain:100,modulates:"frequency"}).sine().dac().play();

//simple frequency modulation
//the "modulates" parameter on the gain tells it how to connect
//to the sine
//__().sine(.1).gain({gain:100,modulates:"frequency"}).sine().dac();

///start up the sines
//__("sine").start();		


	//__().lfo().sine().dac().play();


	//__().dalek().ring({distortion:50,frequency:2000}).bitcrusher({bits:4}).dac().play();

	//__().brown().dac().play();

	//__().bar().reverb({path:"../data/ir/hall.wav"}).dac().play();

	//__().bar().bitcrusher({bits:1}).dac().play();


	/*
	__().sine({class:"foo"}).gain(0).dac();

	__().sine({class:"foo"}).gain(0).dac();

	__().sine({class:"foo"}).gain(0).dac();

	console.log("it is = "+__(".foo").size());
	*/


/*
	__().sine(991).gain(0).dac();

	__("sine").start();
		//__("sine").ramp(80,5,"frequency");
	__("gain").ramp(1,5,"gain",0);		
*/
	//__("gain").ramp(0.001,.00001,"gain");		

	//__().begin("editor1").sine().dac().end("editor1");




/*
__().triangle({id:"t1"}).gain({id:"g1"}).dac().play();
//use jquery to bind to events from the slider and change 
//the frequency of the triangle



$("input[type='range']").bind("input",function(evt){
	if(evt && evt.target) {
		__("#t1").frequency(evt.target.value);
	}
});
//bind to the checkbox to mute the gain
$("input[type='checkbox']").bind("click",function(evt){
	if(evt && evt.target) {
		var state = evt.target.checked ? 0 : 1;
		console.log(state)
		__("#g1").volume(state);
	}
});
*/




/*
	//set up sounds
	__().sine(80).adsr({id:"kick"}).compressor({release:0}).dac();
	__().saw(180).gain(.25).lowpass({frequency:180}).connect("compressor");	
	__().pink().adsr({id:"snare"}).connect("compressor");
	__().white().adsr({id:"hihat"}).connect("compressor").play();

	//set up sequencer and start it
	__.loop({steps:8,tempo:200});

	//bind saw to step events
	__("saw").bind("step",function(index,data){
		if(data) {			
			__.frequency(__.random(50,100));
		}
	},[1,1,0,0,1,0,0,1]);		

	//bind an envelope to step events
	__("#kick").bind("step",function(index,data){
		if(data) {			
			__.adsr("trigger",.1);
		}
	},[1,1,0,0,1,0,0,1]);

	//bind an envelope to step events
	__("#snare").bind("step",function(index,data){
		if(data) {			
			__.adsr("trigger",.05);
		}
	},[0,0,0,1,0,0,0,1]);

	//bind an envelope to step events
	__("#hihat").bind("step",function(index,data){
		if(data) {			
			__.adsr("trigger",.01);
		}
	},[1,1,1,1,1,1,1,1]);

	__.loop("start");
*/


	/*
	//global function
	__().loop({steps:8,tempo:200},function(data,index){
		if(data[0]) {
			__("sine").frequency((function(){
				return Math.max(Math.random()*200,80);
			})());
			__("#foo").adsr("trigger",[.5,.05,.5,.5,.1]);
		}
		if(data[1]) {
			__("#bar").adsr("trigger",[.001,.001,.5,.001,.001]);
		}
		__("#baz").adsr("trigger",[.001,.001,.5,.001,.001]);		
	},[
		[0,0],[0,1],[0,0],[0,1],[0,0],[0,1],[0,0],[1,1]
	]);
	*/

	/*
	//macro test
	__().bar().comb().dac();
	__("bar").start();
	*/			

	//reverb defaults
	//__().bar().reverb().dac().play();

	//overdrive / comb test
	//__().bar().overdrive({drive:100000}).comb({drive:10,delay:.1}).dac();
	//__("bar").start();

	//overdrive / comb test
	//__().bar().comb({drive:10,delay:.1}).adsr().dac();
	//__("bar").start();	


	//__().white().dac();
	//__().pink().dac().play();
	//__().lfo({modulates:"frequency",gain:50,frequency:100}).connect("lowpass");
	//__().lfo({modulates:"frequency",gain:50,frequency:.025}).connect("highpass").play();

	/*
	//from this example â€“ http://www.w3.org/TR/webaudio/#ModularRouting
	//dry paths
	__().buffer({path:"../data/various/gun-cock.wav",loop:true}).lowpass().gain({gain:10}).gain({id:"master_dry"}).dac();
	__().buffer({path:"../data/various/gun-cock.wav",loop:true,id:"wet"}).reverb({path:"../data/ir/hall.wav"}).gain({gain:10}).gain({id:"master_dry",gain:0}).dac();
	
	__().sine({frequency:140}).panner().gain().connect("#master_dry");
	
	__().lfo({modulates:"gain",frequency:1,gain:1}).connect("#master_dry");

	//wet paths
	__("waveshaper").gain().reverb({path:"../data/ir/hall.wav"}).gain({gain:100}).dac();
	
	//start
	__("buffer,lfo,sine").start();
	*/

	//__().sine({frequency:100}).foo().dac();
	//__("foo").gain({gain:1000}).dac();
	//__().saw({frequency:2200}).connect("foo");	
	//__("sine").start();
	
	/*
	__().sine({frequency:1000}).dac();
	__().triangle({frequency:100}).dac();
	__().lfo({modulates:"frequency",type:"sine",frequency:2000}).connect("sine");
	__().lfo({modulates:"detune",type:"square",frequency:10,gain:5000}).connect("triangle");
	__().lfo({modulates:"gain",frequency:60}).connect("gain");						
	__("sine,lfo,triangle").start();
	*/
	
	/*
	//delay example
	__().bar({id:"foo"}).delay({time:.75,id:"delay1"}).gain({id:"bar"}).dac();
	__("#foo").delay({time:.3}).connect("#bar");
	__("#foo").delay({time:.175}).connect("#bar");
	__("#foo").delay({time:.6}).connect("#bar");
	__("#bar").gain({gain:.35}).connect("#delay1");	
	__("#foo").connect("#bar");			
	__("#foo").start();
	*/
	

	/*
	__().sine({"frequency":300,"id":"sine1"}).dac();

	__().lfo({
		type:"sine",
		frequency:1,
		gain:100
	}).connect("#sine1");
	
	__("sine,lfo").start();
	*/
	
	/*
	__().sine({frequency:800,id:"last"}).gate({id:"bar"}).gain({id:"master_gain",gain:0}).dac();
	__().sine().gate({id:"foo"}).foo().connect("#master_gain");
	__().sine({frequency:1600,id:"first"}).gate({id:"baz"}).waveshaper().connect("#master_gain");
			
	__().lfo({modulates:"gain",frequency:.025,gain:.5}).connect("#master_gain");
	__().lfo({modulates:"gain",frequency:25,gain:.5}).connect("#baz");	
	__().lfo({modulates:"frequency",frequency:.0050,gain:1000}).connect("#last");
	__().lfo({modulates:"detune",frequency:.50,gain:10}).connect("#last");
				
	__("sine,lfo").start();
	*/
	
	//open up the gate to make noise
	//__("gate").gate("open");
	//__("gate").gate("close");	
			
</script>
	
<body></body>

</html>